<!DOCTYPE HTML>
<html>
<head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/custom.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
        <link rel="icon" href="images/logo/Artboard 1logo.png">
        <script src="js/jquery-3.4.1.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/custom.js"></script>
        <!-- asdsadsad-->
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
        <link rel="stylesheet" href="dist/css/bootstrap-select.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <!--<script src="dist/js/bootstrap-select.js"></script> -->


<script>
var row = new Array();
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function()
{
    if (this.readyState == 4 && this.status == 200)
    {
        var data = JSON.parse(this.responseText);
        var container = document.getElementById("userList");
        for(var i=0; i<data.length;i++)
        {
            var count = i+1;
            row[i] = document.createElement("tr");
            row[i].innerHTML ="<th scope=\"row\">"+ count + " </th><td>"+data[i]['name']+"    "+ data[i]['surname']+"</td><td>"+data[i]['faculty']+"</td><td>  "+data[i]['department']+"</td>";
            container.appendChild(row[i]);
        }
        
    }
};
xmlhttp.open("GET", "findUser.php", true);
xmlhttp.send();

function removeDisplay()
{
    for(var i = 0; i<row.length;i++)
        row[i].remove();
}

function display()
{
    var select = document.getElementById("type");
    var type = select.options[select.selectedIndex].value;
    var search = document.getElementById("search").value;

    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function()
    {
        if (this.readyState == 4 && this.status == 200)
        {
            removeDisplay();
            var container = document.getElementById("userList");
            var data = JSON.parse(this.responseText);
            for(var i=0; i<data.length;i++)
                {
                    var count = i+1;
                    row[i] = document.createElement("tr");
                    row[i].innerHTML ="<th scope=\"row\">"+ count + " </th><td>"+data[i]['name']+"    "+ data[i]['surname']+"</td><td>"+data[i]['faculty']+"</td><td>"+data[i]['department']+"</td>";
                    container.appendChild(row[i]);
                }
            // document.getElementById("test").innerHTML = this.responseText;
        }
    };
    xmlhttp.open("GET", "findUser.php?search=" + search +"&type="+type, true);
    xmlhttp.send();
}

</script>
<body>

<p><b>Start typing a name in the input field below:</b></p>
<form> 
<select id="type" onchange="display()">
  <option value="name">Name</option>
  <option value="department">Department</option>
  <option value="faculty">Faculty</option>
</select>
First name: <input id="search" type="text" oninput="display()" >
</form>
<div class="container">
            <div class="row">
                <div class ="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col"> #</th>
                                <th scope="col">Name</th>
                                <th scope="col">Faculty</th>
                                <th scope="col">Department</th>
                            </tr>
                        </thead>
                        <tbody id="userList">
                            <div id="test"></div>
                            <!--<div id="userList"></div> -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


<div id="demo"></div>

<script>

</script>
</head>
        <!-- JQuery for boostrap  -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>